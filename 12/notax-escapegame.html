<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ç¨é‡‘ã®ãªã„ä¸–ç•Œã‹ã‚‰ã®è„±å‡ºï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¿ãƒƒã‚¯å¯¾å¿œï¼‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      background-color: #f8f8f8;
      margin: 0;
      padding: 0;
    }
    #game-container {
      max-width: 700px;
      margin: 0 auto;
      padding: 20px;
      background-color: white;
      box-shadow: 0 0 10px gray;
      min-height: 100vh;
      box-sizing: border-box;
    }
    h1 {
      font-size: 22px;
      margin-top: 10px;
    }
    .question {
      margin: 15px 0 10px;
      font-size: 18px;
    }
    .choice-button, #next-button {
      display: block;
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #eee;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .choice-button:hover {
      background-color: #ddd;
    }
    .info-box {
      padding: 10px;
      border-radius: 5px;
      margin-top: 15px;
    }
    .correct {
      background-color: #d4edda;
    }
    .incorrect {
      background-color: #f8d7da;
    }
    #status-bar {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }
    .stage-image {
      width: 100%;
      margin: 10px 0;
      border-radius: 8px;
    }
    #next-button {
      background-color: #007bff;
      color: white;
      display: none;
    }
    @media screen and (max-width: 480px) {
      h1 {
        font-size: 20px;
      }
      .question {
        font-size: 16px;
      }
      .choice-button, #next-button {
        font-size: 15px;
        padding: 10px;
      }
    }
  
    #back-button {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: red;
      color: white;
      padding: 10px 16px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      z-index: 1000;
    }

  </style>
</head>
<body>
  <button id="back-button" onclick="history.back()">BACK</button>
  <div id="game-container">
    <div id="status-bar">
      <div>ã‚¹ã‚³ã‚¢: <span id="score">0</span></div>
      <div>çµŒéæ™‚é–“: <span id="timer">0</span> ç§’</div>
    </div>

    <h1 id="stage-title"></h1>
    <img id="stage-image" class="stage-image" src="" alt="ã‚¹ãƒ†ãƒ¼ã‚¸ç”»åƒ">
    <div class="question" id="question-text"></div>

    <div id="choices-container"></div>
    <button id="next-button" onclick="goToNextStage()">â–¶ æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¸</button>
    <div class="info-box" id="result-box"></div>
  </div>

  <script>
    const stages = [
      {
        title: "ã‚¹ãƒ†ãƒ¼ã‚¸1ï¼šç«äº‹ã®ãƒ“ãƒ«",
        image: "no-tax-country2022.jpg",
        question: "ç«äº‹ãŒèµ·ãã¦ã„ã‚‹ã®ã«æ¶ˆé˜²è»ŠãŒæ¥ã¾ã›ã‚“ã€‚ãªãœã§ã—ã‚‡ã†ï¼Ÿ",
        choices: [
          { text: "æ¶ˆé˜²å£«ãŒå¯åŠã—ãŸ", correct: false },
          { text: "ç¨é‡‘ãŒãªã„ãŸã‚æ¶ˆé˜²ã‚µãƒ¼ãƒ“ã‚¹ãŒåœæ­¢ã—ã¦ã„ã‚‹", correct: true },
          { text: "ä»Šæ—¥ã¯æ¶ˆé˜²è»ŠãŒä¼‘ã¿", correct: false }
        ]
      },
      {
        title: "ã‚¹ãƒ†ãƒ¼ã‚¸2ï¼šè’ã‚ŒãŸå…¬åœ’",
        image: "no-tax-country2022.jpg",
        question: "å…¬åœ’ãŒã‚´ãƒŸã ã‚‰ã‘ã«ãªã£ã¦ã„ã¾ã™ã€‚ã©ã†ã—ã¦ï¼Ÿ",
        choices: [
          { text: "ç¨é‡‘ãŒãªããªã‚Šæ¸…æƒãŒæ­¢ã¾ã£ã¦ã„ã‚‹", correct: true },
          { text: "é¢¨ãŒå¼·ã‹ã£ãŸã‹ã‚‰", correct: false },
          { text: "çŠ¬ãŒã‚´ãƒŸã‚’é‹ã‚“ã ", correct: false }
        ]
      },
      {
        title: "ã‚¹ãƒ†ãƒ¼ã‚¸3ï¼šé–‰é–ã•ã‚ŒãŸç—…é™¢",
        image: "no-tax-country2022.jpg",
        question: "ã‘ãŒäººãŒç—…é™¢ã«è¡Œã£ã¦ã‚‚è¨ºã¦ã‚‚ã‚‰ãˆã¾ã›ã‚“ã€‚ãªãœï¼Ÿ",
        choices: [
          { text: "è–¬ãŒåˆ‡ã‚Œã¦ã„ãŸ", correct: false },
          { text: "åŒ»è€…ãŒä¼‘æ†©ä¸­", correct: false },
          { text: "å…¬ç«‹ç—…é™¢ã¯ç¨é‡‘ã§é‹å–¶ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‰", correct: true }
        ]
      },
      {
        title: "ã‚¹ãƒ†ãƒ¼ã‚¸4ï¼šæ²»å®‰ã®æ‚ªåŒ–",
        image: "no-tax-country2022.jpg",
        question: "ä¸‡å¼•ããŒå¤šç™ºï¼è­¦å¯Ÿã‚‚ã„ã¾ã›ã‚“ã€‚ãªãœï¼Ÿ",
        choices: [
          { text: "ãŠã¾ã‚ã‚Šã•ã‚“ãŒé è¶³ä¸­", correct: false },
          { text: "è­¦å¯Ÿã‚‚ç¨é‡‘ã§é‹å–¶ã•ã‚Œã¦ã„ã‚‹", correct: true },
          { text: "ä»Šæ—¥ã¯éç•ªã®æ—¥", correct: false }
        ]
      },
      {
        title: "ã‚¹ãƒ†ãƒ¼ã‚¸5ï¼šå£Šã‚ŒãŸæ©‹ã¨é“è·¯",
        image: "no-tax-country2022.jpg",
        question: "æ©‹ãŒå£Šã‚ŒãŸã¾ã¾ã€‚ãªãœä¿®ç†ã•ã‚Œãªã„ï¼Ÿ",
        choices: [
          { text: "æ©‹ã®ç¥æ§˜ãŒæ€’ã£ã¦ã‚‹", correct: false },
          { text: "ä¿®ç†å±‹ã•ã‚“ãŒä¸è¶³ã—ã¦ã„ã‚‹", correct: false },
          { text: "é“è·¯æ•´å‚™ã‚‚ç¨é‡‘ã§ã¾ã‹ãªã‚ã‚Œã¦ã„ã‚‹", correct: true }
        ]
      }
    ];

    let currentStage = 0;
    let score = 0;
    let startTime = Date.now();
    let timerInterval;

    function renderStage() {
      const stage = stages[currentStage];
      document.getElementById("stage-title").innerText = stage.title;
      document.getElementById("question-text").innerText = stage.question;
      document.getElementById("stage-image").src = stage.image;

      const choicesContainer = document.getElementById("choices-container");
      choicesContainer.innerHTML = "";
      stage.choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.className = "choice-button";
        btn.innerText = choice.text;
        btn.onclick = () => checkAnswer(btn, choice.correct);
        choicesContainer.appendChild(btn);
      });

      document.getElementById("result-box").innerHTML = "";
      document.getElementById("next-button").style.display = "none";
    }

    function checkAnswer(button, correct) {
      const box = document.getElementById("result-box");
      if (correct) {
        score++;
        document.getElementById("score").innerText = score;
        box.innerHTML = "æ­£è§£ã§ã™ï¼ã€Œæ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¸ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚";
        box.className = "info-box correct";
        document.getElementById("next-button").style.display = "block";

        // å…¨é¸æŠè‚¢ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹ã«
        document.querySelectorAll(".choice-button").forEach(btn => {
          btn.disabled = true;
          if (btn !== button) btn.style.opacity = 0.5;
        });
      } else {
        box.innerHTML = "ä¸æ­£è§£ï¼ã‚‚ã†ä¸€åº¦è€ƒãˆã¦ã¿ã‚ˆã†ã€‚";
        box.className = "info-box incorrect";
      }
    }

    function goToNextStage() {
      currentStage++;
      if (currentStage < stages.length) {
        renderStage();
      } else {
        showEnding();
      }
    }

    function showEnding() {
  clearInterval(timerInterval);
  const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);
  const container = document.getElementById("game-container");
  container.innerHTML = `
    <h1>ğŸ‰ è„±å‡ºæˆåŠŸï¼</h1>
    <p>ç¨é‡‘ãŒã‚ã‚‹ã“ã¨ã§ã€ç§ãŸã¡ã®ç”Ÿæ´»ã¯å®ˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p>
    <img src="tax-country2022.jpg" alt="ç¨é‡‘ã®ã‚ã‚‹ä¸–ç•Œ" style="width:100%; margin-top:10px; border-radius:8px;">
    <div class="info-box">
      æ­£è§£æ•°ï¼š${score} / ${stages.length}<br>
      ã‚¿ã‚¤ãƒ ï¼š${elapsedSeconds} ç§’
    </div>
    <div class="info-box" style="margin-top:10px; background:#e9f5ff;">
      æ¶ˆé˜²ãƒ»åŒ»ç™‚ãƒ»æ¸…æƒãƒ»è­¦å¯Ÿãƒ»ã‚¤ãƒ³ãƒ•ãƒ©â€¦â€¦<br>
      ã™ã¹ã¦ç¨é‡‘ãŒæ”¯ãˆã¦ã„ã‚‹ã‚“ã ã­ï¼
    </div>
  `;
}


    function startTimer() {
      timerInterval = setInterval(() => {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("timer").innerText = elapsed;
      }, 1000);
    }

    renderStage();
    startTimer();
  </script>
</body>
</html>
