<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å£Šã‚ŒãŸæ©‹ã‚’ç›´ãã†ï¼</title>
  <style>
    /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    @keyframes fadeSlideDown {
      0% {
        opacity: 0;
        transform: translateY(-30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes zoomIn {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes fadeInBody {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #fffae6;
      text-align: center;
      margin: 0;
      padding: 20px;
      opacity: 0;
      animation: fadeInBody 1.5s ease-in forwards;
    }

    h1 {
      color: #ff6600;
      font-size: 32px;
      opacity: 0;
      animation: fadeSlideDown 1s ease-out 0.3s forwards;
    }

    img {
      opacity: 0;
      animation: zoomIn 1.2s ease-out 0.8s forwards;
    }

    h2, h3 { color: #2c3e50; }

    table {
      width: 80%;
      margin: 20px auto;
      border-collapse: collapse;
      background-color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    th, td {
      border: 1px solid #2c3e50;
      padding: 12px;
      text-align: center;
    }

    th {
      background-color: #3498db;
      color: white;
    }

    button {
      background-color: #2ecc71;
      color: white;
      border: none;
      padding: 12px 24px;
      cursor: pointer;
      font-size: 16px;
      border-radius: 8px;
    }

    button:hover { background-color: #27ae60; }

    .feedback {
      width: 80%;
      margin: 20px auto;
      padding: 15px;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      color: #000000;
    }

    #feedbackList p {
      background: #ecf0f1;
      padding: 10px;
      border-radius: 5px;
      margin: 5px 0;
    }

    #feedbackInput {
      width: 80%;
      min-height: 66px;
      padding: 12px;
      font-size: 16px;
      text-align: left;
      color: #000;
      background-color: #fff;
      border: 2px solid #2c3e50;
      border-radius: 6px;
      line-height: 1.5;
      white-space: pre-wrap;
      overflow-wrap: break-word;
      word-break: break-word;
    }

    .input-group {
      display: flex;
      justify-content: center;
      align-items: stretch;
      gap: 10px;
      margin-top: 10px;
    }

    select {
      font-size: 18px;
      padding: 10px;
    }

    .home-button {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 24px;
      background-color: red;
      color: white;
      border: none;
      border-radius: 20px;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      z-index: 1000;
    }

    .home-button:hover { background-color: #cc0000; }
  </style>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    function calculateTax() {
      let taxType = document.getElementById("taxType").value;
      let aIncome = 700, bIncome = 250, cIncome = 50, totalTax = 300;
      let aTax, bTax, cTax;
      if (taxType === "fixed") {
        let perPerson = totalTax / 3;
        aTax = bTax = cTax = perPerson;
      } else if (taxType === "proportional") {
        let totalIncome = aIncome + bIncome + cIncome;
        aTax = (aIncome / totalIncome) * totalTax;
        bTax = (bIncome / totalIncome) * totalTax;
        cTax = (cIncome / totalIncome) * totalTax;
      } else if (taxType === "progressive") {
        aTax = Math.min(aIncome * 0.35, totalTax * 1.0);
        bTax = Math.min(bIncome * 0.20, totalTax * 1.0);
        cTax = Math.min(cIncome * 0.10, totalTax * 1.0);
      }
      document.getElementById("aTax").value = Math.round(aTax);
      document.getElementById("bTax").value = Math.round(bTax);
      document.getElementById("cTax").value = Math.round(cTax);
      updateRemainingMoney();
    }

    function updateRemainingMoney() {
      let aIncome = 700, bIncome = 250, cIncome = 50;
      let aTax = parseFloat(document.getElementById("aTax").value) || 0;
      let bTax = parseFloat(document.getElementById("bTax").value) || 0;
      let cTax = parseFloat(document.getElementById("cTax").value) || 0;
      document.getElementById("aRemaining").innerText = (aIncome - aTax) + "ä¸‡å††";
      document.getElementById("bRemaining").innerText = (bIncome - bTax) + "ä¸‡å††";
      document.getElementById("cRemaining").innerText = (cIncome - cTax) + "ä¸‡å††";
    }

    function resetTaxInputs() {
      document.getElementById("aTax").value = 0;
      document.getElementById("bTax").value = 0;
      document.getElementById("cTax").value = 0;
      updateRemainingMoney();
    }

    function saveFeedbackAsImage() {
      const feedbackDiv = document.querySelector('.feedback');
      feedbackDiv.scrollIntoView();
      html2canvas(feedbackDiv, {
        backgroundColor: "#ffffff",
        scale: 2
      }).then(canvas => {
        const link = document.createElement('a');
        link.download = "ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”»åƒ.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    }
  </script>
</head>

<body>
  <button class="home-button" onclick="location.href='../main.html'">HOME</button>
  <h1>å£Šã‚ŒãŸæ©‹ã‚’ç›´ãã†ï¼</h1>
  <img src="bridge.png" alt="å£Šã‚ŒãŸæ©‹ã®ã‚¤ãƒ©ã‚¹ãƒˆ" width="300">
  <p>ã‚ã‚‹æ‘ã«å¤§åˆ‡ãªæ©‹ãŒã‚ã‚Šã¾ã—ãŸã€‚ã§ã‚‚ã€å¤§é›¨ã§æ©‹ãŒå£Šã‚Œã¦ã—ã¾ã„ã¾ã—ãŸï¼æ©‹ã‚’ç›´ã™ã«ã¯300ä¸‡å††ã‹ã‹ã‚Šã¾ã™ã€‚</p>
  <p>æ‘ã«ã¯3äººã®æ‘æ°‘ãŒã„ã¾ã™ã€‚ãã‚Œãã‚Œã®åå…¥ã«å¿œã˜ã¦ã€æ©‹ã®ä¿®ç†è²»ç”¨ã‚’åˆ†æ‹…ã™ã‚‹æ–¹æ³•ã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

  <h2>ç¨ã®ãƒ«ãƒ¼ãƒ«ã‚’é¸ã¼ã†ï¼</h2>
  <label for="taxType">ğŸ‘‰</label>
  <select id="taxType" onchange="calculateTax()">
    <option value="" selected disabled>ç¨ã®é›†ã‚æ–¹ã‚’é¸æŠã—ã‚ˆã†</option>
    <option value="fixed">ã¿ã‚“ãªåŒã˜é¡ã‚’å‡ºã™</option>
    <option value="proportional">ã¿ã‚“ãªåŒã˜å‰²åˆã§å‡ºã™</option>
    <option value="progressive">åå…¥ã®å¤šã„äººã«å¤šã‚ã«è² æ‹…ã—ã¦ã‚‚ã‚‰ã†</option>
  </select>

  <h2>æ‘æ°‘ã®åå…¥ã¨è² æ‹…é¡</h2>
  <table>
    <tr>
      <th>æ‘æ°‘</th><th>åå…¥ï¼ˆä¸‡å††ï¼‰</th><th>è² æ‹…é¡ï¼ˆä¸‡å††ï¼‰</th><th>æ®‹ã‚Šã®ãŠé‡‘ï¼ˆä¸‡å††ï¼‰</th>
    </tr>
    <tr>
      <td>Aã•ã‚“ï¼ˆãŠé‡‘æŒã¡ï¼‰</td><td>700</td>
      <td><input type="number" id="aTax" value="0" oninput="updateRemainingMoney()"></td>
      <td id="aRemaining">-</td>
    </tr>
    <tr>
      <td>Bã•ã‚“ï¼ˆæ™®é€šã®ç”Ÿæ´»ï¼‰</td><td>250</td>
      <td><input type="number" id="bTax" value="0" oninput="updateRemainingMoney()"></td>
      <td id="bRemaining">-</td>
    </tr>
    <tr>
      <td>Cã•ã‚“ï¼ˆå°‘ã—è²§ã—ã„ï¼‰</td><td>50</td>
      <td><input type="number" id="cTax" value="0" oninput="updateRemainingMoney()"></td>
      <td id="cRemaining">-</td>
    </tr>
  </table>

  <button onclick="resetTaxInputs()">ã©ã‚ŒãŒå…¬å¹³ã ã‚ã†ï¼Ÿ<br>è‡ªåˆ†ãŒã€Œå…¬å¹³ã€ã¨æ€ã†è² æ‹…é¡ã«å¤‰ãˆã¦ã¿ã‚ˆã†ï¼</button>

  <h2>è€ƒãˆã¦ã¿ã‚ˆã†ï¼</h2>
  <p>
    åå…¥ãŒåŒã˜ãªã‚‰ã€åŒã˜é¡ã®ç¨é‡‘ã‚’è² æ‹…ã™ã‚‹ï¼ã€Œæ°´å¹³çš„å…¬å¹³ã€ã¨ã„ã„ã¾ã™<br>
    åå…¥ãŒé•ã†ãªã‚‰ã€ãã‚Œã«å¿œã˜ã¦ç¨é‡‘ã‚’è² æ‹…ã™ã‚‹ï¼ã€Œå‚ç›´çš„å…¬å¹³ã€ã¨ã„ã„ã¾ã™<br>
    é¸æŠè‚¢ã«ã‚ã£ãŸè² æ‹…ã®ä»•æ–¹ã‚„ã‚ãªãŸã®è€ƒãˆãŸè² æ‹…ã®ä»•æ–¹ã¯ã©ã£ã¡ã ã‚ã†ï¼Ÿ
  </p>

  <div class="feedback">
    <h3>ã‚ãªãŸãŒæ‘é•·ã ã£ãŸã‚‰ã€ã©ã®æ–¹æ³•ãŒã‚ˆã„ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ<br>Aã•ã‚“ã€Bã•ã‚“ã€Cã•ã‚“ã€ã¿ã‚“ãªãŒç´å¾—ã™ã‚‹æ–¹æ³•ã¯ã‚ã‚‹ï¼Ÿ<br>æ„è¦‹ã‚’å…¥åŠ›ã—ã¦å…±æœ‰ã—ã‚ˆã†ï¼</h3>
    <div class="input-group">
      <div id="feedbackInput" contenteditable="true"></div>
      <button onclick="saveFeedbackAsImage()">ç”»åƒã‚’ä¿å­˜</button>
    </div>
    <div id="feedbackList"></div>
  </div>
</body>
</html>
